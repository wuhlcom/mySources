webpackJsonp([1],{IiC0:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=r("VU/8")({name:"App"},o,!1,function(e){r("yGYl")},null,null).exports,i=r("/ocq"),s="/gateway/route/add",u="/gateway/route/query",n="/gateway/route/update",m="/gateway/route/delete",c="/gateway/user/login",d={name:"GateWay",data:function(){return{status:[{label:"启用",value:1},{label:"禁用",value:0}],urlTypeObj:[{label:"HTTP",value:"HTTP"},{label:"LB",value:"LB"}],params:{page:1,listRows:10},formLabelWidth:"120px",dialogFormVisible:!1,dialogFormType:1,httpUrl:"",failedMsg:"",search:"",total:0,title:"",isDisabled:!1,form:{routeId:"",route:"",routeType:"Path",url:"",urlType:"HTTP",order:0,available:1},rules:{routeId:[{required:!0,message:"请输入路由ID",trigger:"blur"},{min:3,max:64,message:"路由ID长度 1 ~ 64 个字符",trigger:"blur"}],route:[{required:!0,message:"请输入路由接口地址",trigger:"blur"},{min:3,max:64,message:"路由接口长度 3 ~ 64 个字符",trigger:"blur"}],routeType:[{required:!0,message:"请输入路由类型",trigger:"blur"},{min:1,max:32,message:"路由类型长度 3 ~ 32 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入路由地址或服务名",trigger:"blur"},{min:3,max:64,message:"路由地址 3 ~ 64 个字符",trigger:"blur"}],urlType:[{required:!0,message:"请选择URL类型",trigger:"blur"}],order:[{required:!0,message:"请输入路由接口优先级",trigger:"blur"}],available:[{required:!0,message:"请输入选择路由状态",trigger:"blur"}]},tableData:[]}},methods:{initUpdateRouteForm:function(e){this.title="修改路由",this.dialogFormVisible=!0,this.dialogFormType=2,this.form.routeId=e.routeId,this.form.route=e.route,this.form.routeType=e.routeType,this.form.url=e.url,this.form.order=e.order,this.form.available=e.available,this.form.urlType=e.urlType,this.isDisabled=!0},initAddRouteForm:function(){for(var e in this.title="添加路由",this.dialogFormType=1,this.dialogFormVisible=!0,this.form)this.form.hasOwnProperty(e)&&(this.form[e]="");this.form.available=1,this.form.order=0,this.form.routeType="Path",this.form.urlType="HTTP",this.isDisabled=!1},resetForm:function(e){this.$refs[e].resetFields()},searchData:function(){this.getRoutes()},deleteRoute:function(e){var t=this;this.form.routeId=e.routeId,this.$http({method:"post",url:m,data:this.form}).then(function(e){t.getRoutes()})},changeRoute:function(e){var t=this;1===this.dialogFormType?(this.httpUrl=s,this.failedMsg="添加路由失败"):(this.httpUrl=n,this.failedMsg="更新路由失败"),this.$refs[e].validate(function(e){if(!e)return!1;t.$http({method:"post",url:t.httpUrl,data:t.form}).then(function(e){10001===e.data.errcode?(t.dialogFormVisible=!1,t.getRoutes()):t.$message({message:t.failedMsg,type:"error"})})})},handleCurrentChange:function(e){this.params.page=e,this.getRoutes()},getRoutes:function(){var e=this;this.$http({method:"post",url:u,data:this.params}).then(function(t){if(10001===t.data.errcode){var r=t.data.result;e.tableData=r,e.total=t.data.totalRows}else e.tableData="",e.total=0})}},created:function(){this.getRoutes()}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gateway"},[r("h1",[e._v("路由列表")]),e._v(" "),r("header",[r("div",{staticClass:"search"},[r("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchData(t):null}},model:{value:e.params.routeId,callback:function(t){e.$set(e.params,"routeId",t)},expression:"params.routeId"}})],1),e._v(" "),r("div",{staticClass:"add"},[r("el-button",{attrs:{type:"primary"},on:{click:e.initAddRouteForm}},[e._v("添加")])],1),e._v(" "),r("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"路由ID","label-width":e.formLabelWidth,prop:"routeId"}},[r("el-input",{attrs:{disabled:e.isDisabled,"auto-complete":"off",placeholder:"uwb-resources"},model:{value:e.form.routeId,callback:function(t){e.$set(e.form,"routeId",t)},expression:"form.routeId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"接口地址","label-width":e.formLabelWidth,prop:"route"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"/uwb/resources/**"},model:{value:e.form.route,callback:function(t){e.$set(e.form,"route",t)},expression:"form.route"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"路由类型","label-width":e.formLabelWidth,prop:"routeType"}},[r("el-input",{attrs:{disabled:"","auto-complete":"off",placeholder:"Path"},model:{value:e.form.routeType,callback:function(t){e.$set(e.form,"routeType",t)},expression:"form.routeType"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"优先级","label-width":e.formLabelWidth,prop:"order"}},[r("el-input",{attrs:{disabled:"","auto-complete":"off",placeholder:"0"},model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"路由地址","label-width":e.formLabelWidth,prop:"url"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"192.168.10.232:11003或UWB-RESOURCES"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"路由地址类型","label-width":e.formLabelWidth,prop:"urlType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.urlType,callback:function(t){e.$set(e.form,"urlType",t)},expression:"form.urlType"}},e._l(e.urlTypeObj,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"启用状态","label-width":e.formLabelWidth,prop:"available"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.available,callback:function(t){e.$set(e.form,"available",t)},expression:"form.available"}},e._l(e.status,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")]),e._v(" "),r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.changeRoute("form")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"routeId",label:"路由ID",width:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"route",label:"接口地址",width:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"routeType",label:"路由类型"}}),e._v(" "),r("el-table-column",{attrs:{prop:"order",label:"优先级"}}),e._v(" "),r("el-table-column",{attrs:{prop:"url",label:"路由地址"}}),e._v(" "),r("el-table-column",{attrs:{prop:"urlType",label:"路由地址类型"}}),e._v(" "),r("el-table-column",{attrs:{label:"启用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.available?r("div",[e._v("启用")]):e._e(),e._v(" "),0===t.row.available?r("div",[e._v("禁用")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"route_definition",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.initUpdateRouteForm(t.row)}}},[e._v("修改")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.deleteRoute(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-pagination",{staticClass:"pagination",attrs:{"page-size":e.params.listRows,background:"",layout:"prev, pager, next, total",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var f=r("VU/8")(d,p,!1,function(e){r("IiC0")},"data-v-17c24be2",null).exports,b={data:function(){return{account:{username:"",password:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{min:5,max:16,message:"用户名长度 5 ~ 16 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:32,message:"密码长度 6 ~ 32 个字符",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$http({method:"post",url:c,data:t.account}).then(function(e){var r=e.data;10001==r.errcode?(sessionStorage.setItem("isLogin",!0),t.$router.push({name:"gateway"})):t.$message({message:r.msg,type:"error"})})})},resetForm:function(e){this.$refs[e].resetFields()}}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("el-form",{ref:"account",staticClass:"demo-ruleForm",attrs:{model:e.account,"status-icon":"",rules:e.rules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"账号",prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username",t)},expression:"account.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("account")}},model:{value:e.account.password,callback:function(t){e.$set(e.account,"password",t)},expression:"account.password"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("account")}}},[e._v("登录")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("account")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var g=r("VU/8")(b,h,!1,function(e){r("mnFF")},null,null).exports;a.default.use(i.a);var v=new i.a({routes:[{path:"/",name:"login",component:g},{path:"/gateway",name:"gateway",component:f}]});v.beforeEach(function(e,t,r){var a=sessionStorage.getItem("isLogin");["gateway"].indexOf(e.name)>=0&&(a||v.push({name:"login"})),"login"===e.name&&a&&v.push({name:"gateway"}),r()});var y=v,_=r("zL8q"),w=r.n(_),T=r("mtWM"),k=r.n(T);r("tvR6"),r("Ya8g"),r("N+Om");a.default.prototype.$http=k.a,a.default.config.productionTip=!1,a.default.use(w.a),new a.default({el:"#app",router:y,components:{App:l},template:"<App/>"})},mnFF:function(e,t){},tvR6:function(e,t){},yGYl:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.fdfb751fbe5ac8349745.js.map